<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>fabric操作</title>
    <style>
        body {
            margin: 0;
        }
    </style>
</head>
<body>
<canvas id="canvas" width="600" height="600"></canvas>

<script src="fabric.min.js"></script>
<script>
    var canvas = new fabric.Canvas('canvas', {
        selectionColor: 'blue',
        selectionLineWidth: 2
    });

    var rect = new fabric.Rect({
        top: 100,
        left: 100,
        width: 60,
        height: 60,
        fill: 'red',
        angle: '45'
    });

    rect.on('selected', function() {
        console.log('selected a rectangle');
    });

    canvas.add(rect);

    var circle = new fabric.Circle({
        left: 100,
        top: 100,
        radius: 50
    });

    circle.setGradient('fill', {
        x1: -circle.height / 2,
        y1: 0,
        x2: circle.height / 2,
        y2: 0,
        colorStops: {
            0: "red",
            0.2: "orange",
            0.4: "yellow",
            0.6: "green",
            0.8: "blue",
            1: "purple"
        }
    });

    circle.on('selected', function() {
        console.log('selected a circle');
    });

    var triangle = new fabric.Triangle({
        width: 20,
        height: 30,
        fill: 'blue',
        left: 50, top: 50
    });

    var group = new fabric.Group([ circle, triangle ],{
        left: 150,
        top: 100,
        angle: -10
    });

    canvas.add(group);

    fabric.Image.fromURL('../images/q.jpg', function (oImg) {
        // scale image down, and flip it, before adding it onto canvas
        oImg.scale(0.5).setFlipX(true);
        oImg.set({
            top: 300,
            left: 300
        });

        // add filter
        oImg.filters.push(new fabric.Image.filters.Grayscale());

        // apply filters and re-render canvas when done
        oImg.applyFilters(canvas.renderAll.bind(canvas));

        canvas.add(oImg);
    });

    var path = new fabric.Path('M 0 0 L 200 100 L 170 200 z');
    path.set({left: 220, top: 220});
    canvas.add(path);


    var text = new fabric.Text('hello world,\nI`m Mr.Rain', {
        left: 100,
        top: 100,
        fontSize: 20,
        shadow: 'rgba(0,0,0,0.2) 0 0 5px',
        fontStyle: 'italic',
        fontFamily: 'Hoefler Text',
        textAlign: 'right'
    });
    canvas.add(text);

    //    画方格
    var lineGroup = [];
    drawLineGroup(10, 10);
    function drawLineGroup(stepx, stepy) {
        for (var i = stepx + 0.5; i < canvas_h; i += stepx) {
            var line = new fabric.Line([0, i, canvas_w, i], {
                fill: 'lightgray',
                stroke: 'lightgray',
                strokeWidth: .5,
                hasControls: false,
                hasRotatingPoint: false,
            });
            lineGroup.push(line);
        }
        for (var j = stepy + 0.5; j < canvas_w; j += stepy) {
            var line = new fabric.Line([j, 0, j, canvas_h], {
                fill: 'lightgray',
                stroke: 'lightgray',
                strokeWidth: .5,
                hasControls: false,
                hasRotatingPoint: false,
            });
            lineGroup.push(line);
        }
        var group = new fabric.Group(lineGroup);
        canvas.add(group);
    }
</script>
</body>
</html>